
//  Copyright (c) 1988-2023 by Phill Hallam-Baker
//  
//  Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to deal
//  in the Software without restriction, including without limitation the rights
//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//  
//  The above copyright notice and this permission notice shall be included in
//  all copies or substantial portions of the Software.
//  
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
//  THE SOFTWARE.
//  
//  
// This file is automatically generated from the following source files:
// Command line options: 
//     /dlexer=False
//     /dparser=False
//     /dstack=False

using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using Goedel.Registry;
using Goedel.Utilities;




//
// Namespace Goedel.Tool.Guigen
// Class Guigen
//


// Types
//   TopTypeType
//       Copyright
//       Class
//       Section
//       Action
//   TypeType
//       MITLicense
//       BSD2License
//       BSD3License
//       ISCLicense
//       Apache2License
//       OtherLicense
//       Chooser
//       Primary
//       Button
//       Dialog
//       Color
//       Size
//       Decimal
//       Context
//   IdType
//       SectionT
//   NamespaceType
//       Goedel.Tool.Guigen
//   ClassType
//       Guigen
//   NameType
//       Date
//       Holder
//       License
//       Text
//       Namespace
//       Name
//       Description
//       Id
//       Prompt
//       Icon
//       Entries
//       Type
//   TokenType
//       TypeT

#pragma warning disable IDE0022, IDE0066, IDE1006, IDE0059
namespace Goedel.Tool.Guigen {


    public enum GuigenType {
        _Top,

        Copyright,
        MITLicense,
        BSD2License,
        BSD3License,
        ISCLicense,
        Apache2License,
        OtherLicense,
        Class,
        Section,
        Action,
        Dialog,
        Button,
        Chooser,
        Primary,
        Context,
        Text,
        Color,
        Size,
        Decimal,
        Icon,

        _Label,
        _Bottom
        }    
    

    public abstract partial class _Choice {
        abstract public GuigenType _Tag ();

        public _Choice _Parent;
        public Guigen _Base;

		public abstract void Serialize (StructureWriter Output, bool tag);

    	public virtual void Init (_Choice parent) {
            _Parent = parent;
            _Base ??= parent?._Base;
			}

        

		bool _Initialized = false;
		public virtual void _InitChildren (_Choice parent) {
			Init (parent);
            _Base = parent._Base;
			if (_Initialized) {
				return;
				}
			_Initialized = true;
			}
        }



    public partial class Copyright : _Choice {
		public string					Date;
		public string					Holder;
        public _Choice					License;

        public override GuigenType _Tag () =>GuigenType.Copyright;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			License._InitChildren (this);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Copyright");
				}

			Output.WriteAttribute ("Date", Date);
			Output.WriteAttribute ("Holder", Holder);
	        License.Serialize (Output, true);
			if (tag) {
				Output.EndElement ("Copyright");
				}			
			}
		}

    public partial class MITLicense : _Choice {

        public override GuigenType _Tag () =>GuigenType.MITLicense;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("MITLicense");
				}

			if (tag) {
				Output.EndElement ("MITLicense");
				}			
			}
		}

    public partial class BSD2License : _Choice {

        public override GuigenType _Tag () =>GuigenType.BSD2License;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("BSD2License");
				}

			if (tag) {
				Output.EndElement ("BSD2License");
				}			
			}
		}

    public partial class BSD3License : _Choice {

        public override GuigenType _Tag () =>GuigenType.BSD3License;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("BSD3License");
				}

			if (tag) {
				Output.EndElement ("BSD3License");
				}			
			}
		}

    public partial class ISCLicense : _Choice {

        public override GuigenType _Tag () =>GuigenType.ISCLicense;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("ISCLicense");
				}

			if (tag) {
				Output.EndElement ("ISCLicense");
				}			
			}
		}

    public partial class Apache2License : _Choice {

        public override GuigenType _Tag () =>GuigenType.Apache2License;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Apache2License");
				}

			if (tag) {
				Output.EndElement ("Apache2License");
				}			
			}
		}

    public partial class OtherLicense : _Choice {
		public List <System.String>			Text = new List <System.String> (); 

        public override GuigenType _Tag () =>GuigenType.OtherLicense;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("OtherLicense");
				}

			foreach (string _s in Text) {
				Output.WriteAttribute ("Text",_s);
				}
			if (tag) {
				Output.EndElement ("OtherLicense");
				}			
			}
		}

    public partial class Class : _Choice {
        public TOKEN<_Choice>			Namespace;
        public TOKEN<_Choice>			Name;
		public List <System.String>			Description = new List <System.String> (); 

        public override GuigenType _Tag () =>GuigenType.Class;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Class");
				}

	        Output.WriteId ("Namespace", Namespace.ToString());
	        Output.WriteId ("Name", Name.ToString());
			foreach (string _s in Description) {
				Output.WriteAttribute ("Description",_s);
				}
			if (tag) {
				Output.EndElement ("Class");
				}			
			}
		}

    public partial class Section : _Choice {
        public ID<_Choice>				Id; 
		public string					Prompt;
		public string					Icon;
        public List <_Choice>           Entries = new List<_Choice> ();

        public override GuigenType _Tag () =>GuigenType.Section;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			foreach (var Sub in Entries) {
				Sub._InitChildren (this);
				}
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Section");
				}

	        Output.WriteId ("Id", Id.ToString()); 
			Output.WriteAttribute ("Prompt", Prompt);
			Output.WriteAttribute ("Icon", Icon);
			Output.StartList ("");
			foreach (_Choice _e in Entries) {
				_e.Serialize (Output, true);
				}
			Output.EndList ("");
			if (tag) {
				Output.EndElement ("Section");
				}			
			}
		}

    public partial class Action : _Choice {
        public ID<_Choice>				Id; 
		public string					Prompt;
		public string					Icon;
        public List <_Choice>           Entries = new List<_Choice> ();

        public override GuigenType _Tag () =>GuigenType.Action;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			foreach (var Sub in Entries) {
				Sub._InitChildren (this);
				}
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Action");
				}

	        Output.WriteId ("Id", Id.ToString()); 
			Output.WriteAttribute ("Prompt", Prompt);
			Output.WriteAttribute ("Icon", Icon);
			Output.StartList ("");
			foreach (_Choice _e in Entries) {
				_e.Serialize (Output, true);
				}
			Output.EndList ("");
			if (tag) {
				Output.EndElement ("Action");
				}			
			}
		}

    public partial class Dialog : _Choice {
        public ID<_Choice>				Id; 
        public List <_Choice>           Entries = new List<_Choice> ();

        public override GuigenType _Tag () =>GuigenType.Dialog;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			foreach (var Sub in Entries) {
				Sub._InitChildren (this);
				}
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Dialog");
				}

	        Output.WriteId ("Id", Id.ToString()); 
			Output.StartList ("");
			foreach (_Choice _e in Entries) {
				_e.Serialize (Output, true);
				}
			Output.EndList ("");
			if (tag) {
				Output.EndElement ("Dialog");
				}			
			}
		}

    public partial class Button : _Choice {
        public REF<_Choice>				Id;

        public override GuigenType _Tag () =>GuigenType.Button;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Button");
				}

	        Output.WriteId ("Id", Id.ToString());
			if (tag) {
				Output.EndElement ("Button");
				}			
			}
		}

    public partial class Chooser : _Choice {
        public REF<_Choice>				Id;
		public string					Prompt;
		public string					Icon;
        public TOKEN<_Choice>			Type;
        public List <_Choice>           Entries = new List<_Choice> ();

        public override GuigenType _Tag () =>GuigenType.Chooser;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			foreach (var Sub in Entries) {
				Sub._InitChildren (this);
				}
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Chooser");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			Output.WriteAttribute ("Icon", Icon);
	        Output.WriteId ("Type", Type.ToString());
			Output.StartList ("");
			foreach (_Choice _e in Entries) {
				_e.Serialize (Output, true);
				}
			Output.EndList ("");
			if (tag) {
				Output.EndElement ("Chooser");
				}			
			}
		}

    public partial class Primary : _Choice {

        public override GuigenType _Tag () =>GuigenType.Primary;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Primary");
				}

			if (tag) {
				Output.EndElement ("Primary");
				}			
			}
		}

    public partial class Context : _Choice {
        public TOKEN<_Choice>			Id;
		public string					Prompt;

        public override GuigenType _Tag () =>GuigenType.Context;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Context");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			if (tag) {
				Output.EndElement ("Context");
				}			
			}
		}

    public partial class Text : _Choice {
        public TOKEN<_Choice>			Id;
		public string					Prompt;

        public override GuigenType _Tag () =>GuigenType.Text;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Text");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			if (tag) {
				Output.EndElement ("Text");
				}			
			}
		}

    public partial class Color : _Choice {
        public TOKEN<_Choice>			Id;
		public string					Prompt;

        public override GuigenType _Tag () =>GuigenType.Color;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Color");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			if (tag) {
				Output.EndElement ("Color");
				}			
			}
		}

    public partial class Size : _Choice {
        public TOKEN<_Choice>			Id;
		public string					Prompt;

        public override GuigenType _Tag () =>GuigenType.Size;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Size");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			if (tag) {
				Output.EndElement ("Size");
				}			
			}
		}

    public partial class Decimal : _Choice {
        public TOKEN<_Choice>			Id;
		public string					Prompt;

        public override GuigenType _Tag () =>GuigenType.Decimal;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Decimal");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			if (tag) {
				Output.EndElement ("Decimal");
				}			
			}
		}

    public partial class Icon : _Choice {
        public TOKEN<_Choice>			Id;
		public string					Prompt;

        public override GuigenType _Tag () =>GuigenType.Icon;


		public override void _InitChildren (_Choice Parent) {
			Init (Parent);
			}

		public override void Serialize (StructureWriter Output, bool tag) {

			if (tag) {
				Output.StartElement ("Icon");
				}

	        Output.WriteId ("Id", Id.ToString());
			Output.WriteAttribute ("Prompt", Prompt);
			if (tag) {
				Output.EndElement ("Icon");
				}			
			}
		}

    class _Label : _Choice {
        public REF<_Choice>            Label;

		// This method is never called. It exists only to prevent a warning when a
		// Schema does not contain a ChoiceREF element.
        public void Reach() =>  Label = null;

        public override GuigenType _Tag () => GuigenType._Label;

		public override void Serialize (StructureWriter Output, bool tag) =>Output.WriteId ("ID", Label.ToString());
        }


    public enum StateCode {  
        _Start,
        _Choice,
        _End,

		Copyright_Start,
		Copyright__Date,				
		Copyright__Holder,				
		Copyright__License,				
		MITLicense_Start,
		BSD2License_Start,
		BSD3License_Start,
		ISCLicense_Start,
		Apache2License_Start,
		OtherLicense_Start,
		OtherLicense__Text,				
		Class_Start,
		Class__Namespace,				
		Class__Name,				
		Class__Description,				
		Section_Start,
		Section__Id,				
		Section__Prompt,				
		Section__Icon,				
		Section__Entries,				
		Action_Start,
		Action__Id,				
		Action__Prompt,				
		Action__Icon,				
		Action__Entries,				
		Dialog_Start,
		Dialog__Id,				
		Dialog__Entries,				
		Button_Start,
		Button__Id,				
		Chooser_Start,
		Chooser__Id,				
		Chooser__Prompt,				
		Chooser__Icon,				
		Chooser__Type,				
		Chooser__Entries,				
		Primary_Start,
		Context_Start,
		Context__Id,				
		Context__Prompt,				
		Text_Start,
		Text__Id,				
		Text__Prompt,				
		Color_Start,
		Color__Id,				
		Color__Prompt,				
		Size_Start,
		Size__Id,				
		Size__Prompt,				
		Decimal_Start,
		Decimal__Id,				
		Decimal__Prompt,				
		Icon_Start,
		Icon__Id,				
		Icon__Prompt,				
        }


    struct _StackItem {
        public StateCode   State;
        public Goedel.Tool.Guigen._Choice     Token;
        }

    public partial class Guigen : Goedel.Registry.Parser{
        public List <Goedel.Tool.Guigen._Choice>        Top;
        public Registry	<Goedel.Tool.Guigen._Choice>	Registry;

        public bool StartOfEntry {get;  private set;}

        StateCode								State;
        Goedel.Tool.Guigen._Choice				Current;
        List <_StackItem>						Stack;


        public static Guigen Parse(string File, Goedel.Registry.Dispatch Options) {
            var Result = new Guigen() {
				Options = Options
				};

            using (Stream infile =
                        new FileStream(File, FileMode.Open, FileAccess.Read)) {
                Lexer Schema = new Lexer(File);
                Schema.Process(infile, Result);
                }
            Result.Init ();
			Result._InitChildren ();

            return Result;
            }

		bool _Initialized = false;
		public virtual void _InitChildren () {
			if (_Initialized) {
				return;
				}
			_Initialized = true;
			foreach (var Entry in Top) {
                Entry._Base = this;
				Entry._InitChildren (null);
				}
			}

        public Guigen() {
            Top = new List<Goedel.Tool.Guigen._Choice> () ;
            Registry = new Registry <Goedel.Tool.Guigen._Choice> ();
            State = StateCode._Start;
            Stack = new List <_StackItem> ();
            StartOfEntry = true;

			TYPE__SectionT = Registry.TYPE ("SectionT"); 
			TYPE__TypeT = Registry.TYPE ("TypeT"); 



            }



        public TYPE<Goedel.Tool.Guigen._Choice> TYPE__SectionT ;
        public TYPE<Goedel.Tool.Guigen._Choice> TYPE__TypeT ;

        private Goedel.Tool.Guigen._Choice New_Choice(string Label) {
            switch (Label) {

                case "Copyright": return NewCopyright();
                case "MITLicense": return NewMITLicense();
                case "BSD2License": return NewBSD2License();
                case "BSD3License": return NewBSD3License();
                case "ISCLicense": return NewISCLicense();
                case "Apache2License": return NewApache2License();
                case "OtherLicense": return NewOtherLicense();
                case "Class": return NewClass();
                case "Section": return NewSection();
                case "Action": return NewAction();
                case "Dialog": return NewDialog();
                case "Button": return NewButton();
                case "Chooser": return NewChooser();
                case "Primary": return NewPrimary();
                case "Context": return NewContext();
                case "Text": return NewText();
                case "Color": return NewColor();
                case "Size": return NewSize();
                case "Decimal": return NewDecimal();
                case "Icon": return NewIcon();

				}

            throw new NotFoundReserved ("Reserved word not recognized \"" + Label + "\"");
            }



        private Goedel.Tool.Guigen.Copyright NewCopyright() {
            Goedel.Tool.Guigen.Copyright result = new Goedel.Tool.Guigen.Copyright();
            Push (result);
            State = StateCode.Copyright_Start;
            return result;
            }


        private Goedel.Tool.Guigen.MITLicense NewMITLicense() {
            Goedel.Tool.Guigen.MITLicense result = new Goedel.Tool.Guigen.MITLicense();
            Push (result);
            State = StateCode.MITLicense_Start;
            return result;
            }


        private Goedel.Tool.Guigen.BSD2License NewBSD2License() {
            Goedel.Tool.Guigen.BSD2License result = new Goedel.Tool.Guigen.BSD2License();
            Push (result);
            State = StateCode.BSD2License_Start;
            return result;
            }


        private Goedel.Tool.Guigen.BSD3License NewBSD3License() {
            Goedel.Tool.Guigen.BSD3License result = new Goedel.Tool.Guigen.BSD3License();
            Push (result);
            State = StateCode.BSD3License_Start;
            return result;
            }


        private Goedel.Tool.Guigen.ISCLicense NewISCLicense() {
            Goedel.Tool.Guigen.ISCLicense result = new Goedel.Tool.Guigen.ISCLicense();
            Push (result);
            State = StateCode.ISCLicense_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Apache2License NewApache2License() {
            Goedel.Tool.Guigen.Apache2License result = new Goedel.Tool.Guigen.Apache2License();
            Push (result);
            State = StateCode.Apache2License_Start;
            return result;
            }


        private Goedel.Tool.Guigen.OtherLicense NewOtherLicense() {
            Goedel.Tool.Guigen.OtherLicense result = new Goedel.Tool.Guigen.OtherLicense();
            Push (result);
            State = StateCode.OtherLicense_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Class NewClass() {
            Goedel.Tool.Guigen.Class result = new Goedel.Tool.Guigen.Class();
            Push (result);
            State = StateCode.Class_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Section NewSection() {
            Goedel.Tool.Guigen.Section result = new Goedel.Tool.Guigen.Section();
            Push (result);
            State = StateCode.Section_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Action NewAction() {
            Goedel.Tool.Guigen.Action result = new Goedel.Tool.Guigen.Action();
            Push (result);
            State = StateCode.Action_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Dialog NewDialog() {
            Goedel.Tool.Guigen.Dialog result = new Goedel.Tool.Guigen.Dialog();
            Push (result);
            State = StateCode.Dialog_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Button NewButton() {
            Goedel.Tool.Guigen.Button result = new Goedel.Tool.Guigen.Button();
            Push (result);
            State = StateCode.Button_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Chooser NewChooser() {
            Goedel.Tool.Guigen.Chooser result = new Goedel.Tool.Guigen.Chooser();
            Push (result);
            State = StateCode.Chooser_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Primary NewPrimary() {
            Goedel.Tool.Guigen.Primary result = new Goedel.Tool.Guigen.Primary();
            Push (result);
            State = StateCode.Primary_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Context NewContext() {
            Goedel.Tool.Guigen.Context result = new Goedel.Tool.Guigen.Context();
            Push (result);
            State = StateCode.Context_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Text NewText() {
            Goedel.Tool.Guigen.Text result = new Goedel.Tool.Guigen.Text();
            Push (result);
            State = StateCode.Text_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Color NewColor() {
            Goedel.Tool.Guigen.Color result = new Goedel.Tool.Guigen.Color();
            Push (result);
            State = StateCode.Color_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Size NewSize() {
            Goedel.Tool.Guigen.Size result = new Goedel.Tool.Guigen.Size();
            Push (result);
            State = StateCode.Size_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Decimal NewDecimal() {
            Goedel.Tool.Guigen.Decimal result = new Goedel.Tool.Guigen.Decimal();
            Push (result);
            State = StateCode.Decimal_Start;
            return result;
            }


        private Goedel.Tool.Guigen.Icon NewIcon() {
            Goedel.Tool.Guigen.Icon result = new Goedel.Tool.Guigen.Icon();
            Push (result);
            State = StateCode.Icon_Start;
            return result;
            }


        static Goedel.Tool.Guigen.GuigenType _Reserved(string Label) {
            switch (Label) {

                case "Copyright": return Goedel.Tool.Guigen.GuigenType.Copyright;
                case "MITLicense": return Goedel.Tool.Guigen.GuigenType.MITLicense;
                case "BSD2License": return Goedel.Tool.Guigen.GuigenType.BSD2License;
                case "BSD3License": return Goedel.Tool.Guigen.GuigenType.BSD3License;
                case "ISCLicense": return Goedel.Tool.Guigen.GuigenType.ISCLicense;
                case "Apache2License": return Goedel.Tool.Guigen.GuigenType.Apache2License;
                case "OtherLicense": return Goedel.Tool.Guigen.GuigenType.OtherLicense;
                case "Class": return Goedel.Tool.Guigen.GuigenType.Class;
                case "Section": return Goedel.Tool.Guigen.GuigenType.Section;
                case "Action": return Goedel.Tool.Guigen.GuigenType.Action;
                case "Dialog": return Goedel.Tool.Guigen.GuigenType.Dialog;
                case "Button": return Goedel.Tool.Guigen.GuigenType.Button;
                case "Chooser": return Goedel.Tool.Guigen.GuigenType.Chooser;
                case "Primary": return Goedel.Tool.Guigen.GuigenType.Primary;
                case "Context": return Goedel.Tool.Guigen.GuigenType.Context;
                case "Text": return Goedel.Tool.Guigen.GuigenType.Text;
                case "Color": return Goedel.Tool.Guigen.GuigenType.Color;
                case "Size": return Goedel.Tool.Guigen.GuigenType.Size;
                case "Decimal": return Goedel.Tool.Guigen.GuigenType.Decimal;
                case "Icon": return Goedel.Tool.Guigen.GuigenType.Icon;

                }
            return Goedel.Tool.Guigen.GuigenType._Bottom;
            }


		public void Serialize (TextWriter Output)=> Serialize (Output, OutputFormat.Goedel);

		public void Serialize (TextWriter Output, OutputFormat OutputFormat) {

			StructureWriter StructureWriter = StructureWriter.GetStructureWriter (Output, OutputFormat);
			StructureWriter.StartDocument ();
			foreach (Goedel.Tool.Guigen._Choice Entry in Top) {
				Entry.Serialize (StructureWriter, true);
				}
			StructureWriter.EndDocument ();
			}


        void Push (Goedel.Tool.Guigen._Choice Token) {
            _StackItem Item = new _StackItem () {
					State = State,
					Token = Current
					};

            Stack.Add (Item);

            //Console.WriteLine ("$$$$PUSH {0}", Current);

            Current = Token;
            }

        void Pop () {
			Assert.AssertFalse (Stack.Count == 0, InternalError.Throw);

            _StackItem Item = Stack[Stack.Count -1];
            State = Item.State;
            Current = Item.Token;

            Stack.RemoveAt (Stack.Count -1 ) ;

            //Console.WriteLine ("$$$$POP {0}", Current);
            }



        public override void Process(TokenType Token, Position Position, string Text) {

            if ((Token == TokenType.SEPARATOR) |
                (Token == TokenType.NULL) |
                (Token == TokenType.COMMENT)) {
				return;
				}
			Assert.AssertFalse (Token == TokenType.INVALID, InvalidToken.Throw);

            bool Represent = true;

            while (Represent) {
                //Console.WriteLine ("    {3}: {0} {1} '{2}'", Token, Position, Text, State);


                Represent = false;
                switch (State) {
                    case StateCode._Start:                 //      BEGIN
                        if (Token == TokenType.BEGIN) {
                            State = StateCode._Choice;
                            break;
                            }
                        else {
							throw new ExpectedStart ();
							}

                    case StateCode._Choice:                //      LABEL Class | END
                        if (Token == TokenType.LABEL) {
                            Goedel.Tool.Guigen.GuigenType LabelType = _Reserved (Text);
                            if (false |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Copyright) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Class) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Section) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Action) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Dialog)) {
                                Top.Add(New_Choice(Text));
                                }
                            else {
                                throw new Expected("Parser Error Expected [Class]");
                                }
                            break;
                            }
                        if (Token == TokenType.END) { 
                            State = StateCode._End;
                            break;
                            }
                        else {
							throw new ExpectedClass();
							}

                    case StateCode._End: {                  //      -
                        throw new TooManyClose();
						}

                    case StateCode.Copyright_Start:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Copyright Current_Cast = (Goedel.Tool.Guigen.Copyright)Current;
                            Current_Cast.Date = Text;
                            State = StateCode.Copyright__Date;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Copyright__Date:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Copyright Current_Cast = (Goedel.Tool.Guigen.Copyright)Current;
                            Current_Cast.Holder = Text;
                            State = StateCode.Copyright__Holder;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Copyright__Holder:
                        if (Token == TokenType.LABEL) {
							Goedel.Tool.Guigen.Copyright Current_Cast = (Goedel.Tool.Guigen.Copyright)Current;
                            Goedel.Tool.Guigen.GuigenType LabelType = _Reserved (Text);
                            if ( false |
									(LabelType == Goedel.Tool.Guigen.GuigenType.MITLicense) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.BSD2License) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.BSD3License) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.ISCLicense) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Apache2License) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.OtherLicense) ) {
                                State = StateCode.Copyright__License;
                                Current_Cast.License = New_Choice(Text);
                                }
                            else {
                               throw new Expected ("Parser Error Expected [MITLicense BSD2License BSD3License ISCLicense Apache2License OtherLicense ]");
                                }
                            break;
                            }
                        else { 
						    throw new Expected("Parser Error Expected [MITLicense BSD2License BSD3License ISCLicense Apache2License OtherLicense ]");
                            }

                    case StateCode.Copyright__License:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.MITLicense_Start:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.BSD2License_Start:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.BSD3License_Start:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.ISCLicense_Start:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Apache2License_Start:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.OtherLicense_Start:
                        if (Token == TokenType.BEGIN) {
                            State = StateCode.OtherLicense__Text;
                            break;
                            }
                        else {
                            Pop();
                            Represent = true;
                            break;
                            }
                    case StateCode.OtherLicense__Text:
                       if (Token == TokenType.END) {
                            Pop();
                            break;
                            }
                       else if (Token == TokenType.TEXT) {
                            Goedel.Tool.Guigen.OtherLicense Current_Cast = (Goedel.Tool.Guigen.OtherLicense)Current;
                            Current_Cast.Text.Add (Text);
                            break;							
                            }
                       throw new Expected("Expected Text");


                    case StateCode.Class_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Class Current_Cast = (Goedel.Tool.Guigen.Class)Current;
                            Current_Cast.Namespace = Registry.TOKEN(Position, Text, TYPE__TypeT, Current_Cast);
                            State = StateCode.Class__Namespace;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Class__Namespace:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Class Current_Cast = (Goedel.Tool.Guigen.Class)Current;
                            Current_Cast.Name = Registry.TOKEN(Position, Text, TYPE__TypeT, Current_Cast);
                            State = StateCode.Class__Name;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Class__Name:
                        if (Token == TokenType.BEGIN) {
                            State = StateCode.Class__Description;
                            break;
                            }
                        else {
                            Pop();
                            Represent = true;
                            break;
                            }
                    case StateCode.Class__Description:
                       if (Token == TokenType.END) {
                            Pop();
                            break;
                            }
                       else if (Token == TokenType.TEXT) {
                            Goedel.Tool.Guigen.Class Current_Cast = (Goedel.Tool.Guigen.Class)Current;
                            Current_Cast.Description.Add (Text);
                            break;							
                            }
                       throw new Expected("Expected Text");


                    case StateCode.Section_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Section Current_Cast = (Goedel.Tool.Guigen.Section)Current;
                            Current_Cast.Id = Registry.ID(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Section__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Section__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Section Current_Cast = (Goedel.Tool.Guigen.Section)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Section__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Section__Prompt:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Section Current_Cast = (Goedel.Tool.Guigen.Section)Current;
                            Current_Cast.Icon = Text;
                            State = StateCode.Section__Icon;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Section__Icon:

                        if (Token == TokenType.BEGIN) {
                            State = StateCode.Section__Entries;
                            }
                        else {
							Pop ();
                            Represent = true;
                            }
                        break;
                    case StateCode.Section__Entries: 
                        if (Token == TokenType.END) {
                            Pop();
                            break;
                            }

						// Parser transition for LIST $$$$$

                        else if (Token == TokenType.LABEL) {
							Goedel.Tool.Guigen.Section Current_Cast = (Goedel.Tool.Guigen.Section)Current;
                            Goedel.Tool.Guigen.GuigenType LabelType = _Reserved (Text);
                            if ( false |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Chooser) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Primary) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Button) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Dialog) ) {
                                Current_Cast.Entries.Add (New_Choice(Text));
                                }
                            else {
								throw new Expected ("Parser Error Expected [Chooser Primary Button Dialog ]");
								}
							}
                        break;


                    case StateCode.Action_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Action Current_Cast = (Goedel.Tool.Guigen.Action)Current;
                            Current_Cast.Id = Registry.ID(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Action__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Action__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Action Current_Cast = (Goedel.Tool.Guigen.Action)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Action__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Action__Prompt:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Action Current_Cast = (Goedel.Tool.Guigen.Action)Current;
                            Current_Cast.Icon = Text;
                            State = StateCode.Action__Icon;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Action__Icon:

                        if (Token == TokenType.BEGIN) {
                            State = StateCode.Action__Entries;
                            }
                        else {
							Pop ();
                            Represent = true;
                            }
                        break;
                    case StateCode.Action__Entries: 
                        if (Token == TokenType.END) {
                            Pop();
                            break;
                            }

						// Parser transition for LIST $$$$$

                        else if (Token == TokenType.LABEL) {
							Goedel.Tool.Guigen.Action Current_Cast = (Goedel.Tool.Guigen.Action)Current;
                            Goedel.Tool.Guigen.GuigenType LabelType = _Reserved (Text);
                            if ( false |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Chooser) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Text) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Color) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Size) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Decimal) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Context) ) {
                                Current_Cast.Entries.Add (New_Choice(Text));
                                }
                            else {
								throw new Expected ("Parser Error Expected [Chooser Text Color Size Decimal Context ]");
								}
							}
                        break;


                    case StateCode.Dialog_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Dialog Current_Cast = (Goedel.Tool.Guigen.Dialog)Current;
                            Current_Cast.Id = Registry.ID(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Dialog__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Dialog__Id:

                        if (Token == TokenType.BEGIN) {
                            State = StateCode.Dialog__Entries;
                            }
                        else {
							Pop ();
                            Represent = true;
                            }
                        break;
                    case StateCode.Dialog__Entries: 
                        if (Token == TokenType.END) {
                            Pop();
                            break;
                            }

						// Parser transition for LIST $$$$$

                        else if (Token == TokenType.LABEL) {
							Goedel.Tool.Guigen.Dialog Current_Cast = (Goedel.Tool.Guigen.Dialog)Current;
                            Goedel.Tool.Guigen.GuigenType LabelType = _Reserved (Text);
                            if ( false |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Chooser) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Text) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Color) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Size) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Decimal) |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Icon) ) {
                                Current_Cast.Entries.Add (New_Choice(Text));
                                }
                            else {
								throw new Expected ("Parser Error Expected [Chooser Text Color Size Decimal Icon ]");
								}
							}
                        break;


                    case StateCode.Button_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Button Current_Cast = (Goedel.Tool.Guigen.Button)Current;
                            Current_Cast.Id = Registry.REF(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Button__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Button__Id:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Chooser_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Chooser Current_Cast = (Goedel.Tool.Guigen.Chooser)Current;
                            Current_Cast.Id = Registry.REF(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Chooser__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Chooser__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Chooser Current_Cast = (Goedel.Tool.Guigen.Chooser)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Chooser__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Chooser__Prompt:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Chooser Current_Cast = (Goedel.Tool.Guigen.Chooser)Current;
                            Current_Cast.Icon = Text;
                            State = StateCode.Chooser__Icon;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Chooser__Icon:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Chooser Current_Cast = (Goedel.Tool.Guigen.Chooser)Current;
                            Current_Cast.Type = Registry.TOKEN(Position, Text, TYPE__TypeT, Current_Cast);
                            State = StateCode.Chooser__Type;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Chooser__Type:

                        if (Token == TokenType.BEGIN) {
                            State = StateCode.Chooser__Entries;
                            }
                        else {
							Pop ();
                            Represent = true;
                            }
                        break;
                    case StateCode.Chooser__Entries: 
                        if (Token == TokenType.END) {
                            Pop();
                            break;
                            }

						// Parser transition for LIST $$$$$

                        else if (Token == TokenType.LABEL) {
							Goedel.Tool.Guigen.Chooser Current_Cast = (Goedel.Tool.Guigen.Chooser)Current;
                            Goedel.Tool.Guigen.GuigenType LabelType = _Reserved (Text);
                            if ( false |
									(LabelType == Goedel.Tool.Guigen.GuigenType.Button) ) {
                                Current_Cast.Entries.Add (New_Choice(Text));
                                }
                            else {
								throw new Expected ("Parser Error Expected [Button ]");
								}
							}
                        break;


                    case StateCode.Primary_Start:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Context_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Context Current_Cast = (Goedel.Tool.Guigen.Context)Current;
                            Current_Cast.Id = Registry.TOKEN(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Context__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Context__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Context Current_Cast = (Goedel.Tool.Guigen.Context)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Context__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Context__Prompt:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Text_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Text Current_Cast = (Goedel.Tool.Guigen.Text)Current;
                            Current_Cast.Id = Registry.TOKEN(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Text__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Text__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Text Current_Cast = (Goedel.Tool.Guigen.Text)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Text__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Text__Prompt:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Color_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Color Current_Cast = (Goedel.Tool.Guigen.Color)Current;
                            Current_Cast.Id = Registry.TOKEN(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Color__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Color__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Color Current_Cast = (Goedel.Tool.Guigen.Color)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Color__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Color__Prompt:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Size_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Size Current_Cast = (Goedel.Tool.Guigen.Size)Current;
                            Current_Cast.Id = Registry.TOKEN(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Size__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Size__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Size Current_Cast = (Goedel.Tool.Guigen.Size)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Size__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Size__Prompt:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Decimal_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Decimal Current_Cast = (Goedel.Tool.Guigen.Decimal)Current;
                            Current_Cast.Id = Registry.TOKEN(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Decimal__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Decimal__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Decimal Current_Cast = (Goedel.Tool.Guigen.Decimal)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Decimal__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Decimal__Prompt:
                        Pop ();
                        Represent = true; 
                        break;
                    case StateCode.Icon_Start:
                        if ((Token == TokenType.LABEL) | (Token == TokenType.LITERAL)) {
                            Goedel.Tool.Guigen.Icon Current_Cast = (Goedel.Tool.Guigen.Icon)Current;
                            Current_Cast.Id = Registry.TOKEN(Position, Text, TYPE__SectionT, Current_Cast);
                            State = StateCode.Icon__Id;
                            break;
                            }
                        throw new Expected("Expected LABEL or LITERAL");

                    case StateCode.Icon__Id:
                        if (Token == TokenType.STRING) {
                            Goedel.Tool.Guigen.Icon Current_Cast = (Goedel.Tool.Guigen.Icon)Current;
                            Current_Cast.Prompt = Text;
                            State = StateCode.Icon__Prompt;
                            break;
                            }
                        throw new Expected("Expected String");

                    case StateCode.Icon__Prompt:
                        Pop ();
                        Represent = true; 
                        break;

                    default: {
                        throw new UnreachableCode();
						}
                    }
                }
            }
        }
	}
#pragma warning restore IDE0022	

