

#Mesh/Confirm Service

The Mesh/Confirm confirmation service is a two party protocol. An 
Enquirer requests a response from the 

SRV Prefix:

:_Confirm._tcp

HTTP Well Known Service Prefix:

:/.well-known/confirm

Every Confirm Service transaction consists of exactly one
request followed by exactly one response.

There is no set sequence
in which operations are required to be performed. It is not
necessary to perform a Hello transaction prior to
a CreateGroup, AddMember or any other transaction.

##Request Messages



###Message: ConfirmRequest

Base class for all request messages.

[None]

##Response Messages



###Message: ConfirmResponse

Base class for all response messages. Contains only the
status code and status description fields.

A service MAY return either the response message specified
for that transaction or any parent of that message. 
Thus the RecryptResponse message MAY be returned in response 
to any request.

[None]

##Imported Objects

The Recrypt Administration Sercice makes use of JSON objects
defined in the JOSE Signatgure and Encryption specifications.

##Common classes

The following classes are referenced at multiple points in the protocol.

###Structure: AccountEntry

Represents the collection of data associated with an account. This structure
is not used in the protocol itself and does not appear in the on-the-wire
format. It is included here so that it can be used as a reference point for
describing the semantics of the protocol transaction. It is possible that this
record format may prove of use in specifying archive and interchange protocols.


ResponderAccount: String (Optional)

:The Responder account the request is directed to.

RequestIDs: String [0..Many]

:List of BrokerIDs of pending requests

ResponseIDs: String [0..Many]

:List of BrokerIDs of responses

ArchivedIDs: String [0..Many]

:List of expired requests, now archived.

###Structure: EntryBase


EnquirerID: String (Optional)

:A unique identifier for the transaction generated by
the enquirer. This identifier MAY be used to reject duplicate
transactions by a broker or Requestor.		

BrokerID: String (Optional)

:The unique identifier for the transaction generated by
the broker and returned in the corresponding Enquire
transaction.

###Structure: RequestEntry

* Inherits: EntryBase

Describes a pending request and associated information.


Request: JoseWebSignature (Optional)

:Signed and optionally encrypted request message.

ResponderAccount: String (Optional)

:The Responder account the request is directed to.

Expire: DateTime (Optional)

:Date and time after which the Enquirer has no interest in
the request value. Note that a Broker MAY cancel requests
according to its own policy at any time.

###Structure: ResponseEntry

* Inherits: EntryBase

Describes response to a pending request


RequestStatus: String (Optional)

:The status value. Valid values are PENDING, BCANCEL, ECANCEL, REPLY,
REFUSED, EXPIRED

Response: JoseWebSignature (Optional)

:Signed and optionally encrypted response message.

###Structure: TBSRequest


Text: String (Optional)

:Text of the request

FromID: String (Optional)

:
ToID: String (Optional)

:
###Structure: TBSResponse


SignedRequest: JoseWebSignature (Optional)

Value: Boolean (Optional)

##Utility Transactions

##Transaction: Hello

Request: HelloRequest

Response:HelloResponse

Report service and version information. 

The Hello transaction provides a means of determining which protocol
versions, message encodings and transport protocols are supported by
the service.

##Enquirer Transactions

##Transaction: Enquire

Request: EnquireRequest

Response:EnquireResponse

Post a confirmation request to the broker.

###Message: EnquireRequest

* Inherits: ConfirmRequest




Request: RequestEntry (Optional)

:The request

###Message: EnquireResponse

* Inherits: ConfirmResponse

Reports the success or failure of an Enquire transaction.


BrokerID: String (Optional)

:A unique identifier for the transaction generated by
the broker.

##Transaction: Status

Request: StatusRequest

Response:StatusResponse

Request status on a previously posted request

###Message: StatusRequest

* Inherits: ConfirmRequest

Reports the status or of an Enquire transaction.


Cancel: Boolean (Optional)

:If true, the broker is abandoning the request and it should
no longer be returned to the user as an active pending request.
This flag would typically be set true on the last polling attempt made 
before the Enquirer abandonds the request. It is therefore entirely
valid for a broker to return a Response value if the Cancel flag
is true.

BrokerID: String (Optional)

:The unique identifier for the transaction generated by
the broker and returned in the corresponding Enquire
transaction.

###Message: StatusResponse

* Inherits: ConfirmResponse

The result of a status request.


Response: ResponseEntry (Optional)

##Responder Transactions

##Transaction: Pending

Request: PendingRequest

Response:PendingResponse

Request a list of pending transactions meeting the specified
selection criteria.

###Message: PendingRequest

* Inherits: ConfirmRequest

Request a list of pending requests for a specified account.


Responder: String (Optional)

:The Responder account the the list of pending requests is 
requested for.

BrokerID: String (Optional)

:The BrokerID of the pending request to return.

MaxResponse: Integer (Optional)

:The maximum number of request entries to return.

BeforeId: Integer (Optional)

:Only send request entries posted prior to the specified
entry. 

AfterId: Integer (Optional)

:Only send request entries posted after the specified
entry. 

###Message: PendingResponse

* Inherits: ConfirmResponse

Contains a list of pending requests.


Entries: RequestEntry [0..Many]

:List of pending requests.

##Transaction: Respond

Request: RespondRequest

Response:RespondResponse

Respond to a confirmation request.

###Message: RespondRequest

* Inherits: ConfirmRequest

Respond to a confirmation request.


Response: ResponseEntry (Optional)

:Signed and optionally encrypted response message.

###Message: RespondResponse

* Inherits: ConfirmResponse

Reports the success or failure of a Respond transaction.

[None]

